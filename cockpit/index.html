<!DOCTYPE html>
<html>

<head>
    <!--
    Haas Appliance - Cockpit Firewall Control Page

    This page provides a simple UI for:
      - Simulating firewall changes (dry-run)
      - Comparing current vs planned rules
      - Rolling back to a previous CSV backup

    It loads haas-firewall.js for logic and uses Cockpit's JS APIs.
    -->
    <meta charset="utf-8">
    <title>Haas Firewall Control</title>

    <!-- Cockpit core JS API (required for cockpit.spawn, cockpit.file, etc.) -->
    <script src="resource://cockpit/cockpit.js"></script>

    <!-- Cockpit Web Components polyfills -->
    <script src="resource://cockpit/wc/polyfills.js"></script>

    <!-- Your extension logic -->
    <script src="haas-firewall.js"></script>

    <!-- Cockpit base styles -->
    <link rel="stylesheet"
        href="resource://cockpit/wc/styles.css">

    <!-- Your extension stylesheet (moved from inline <style>) -->
    <link rel="stylesheet"
        href="haas-firewall.css">
</head>

<body>
    <h1>Haas Firewall Control</h1>
    <p>
        Use this page to simulate firewall changes, compare rules, and rollback CSV backups.
    </p>

    <div class="section">
        <h2>Simulate / Compare</h2>
        <p>
            These operations do not make persistent changes to the firewall.
        </p>
        <div class="button-row">
            <button id="btn-dry-run">Simulate Firewall Update (Dry-Run)</button>
            <button id="btn-compare">Compare Current vs Planned Rules</button>
            <button id="btn-show-rules">Show Current UFW Rules</button>
        </div>
    </div>

    <div class="section">
        <h2>Rollback CSV Backup</h2>
        <p>
            Restore a previous CSV backup from:
            <code>/home/mhubbard/Haas_Data_collect/backups</code>
        </p>
        <label for="backup-name">Backup filename (e.g. users_2025-01-13_12-00-00.csv)</label>
        <input type="text"
            id="backup-name"
            placeholder="Enter backup filename">
        <div class="button-row"
            style="margin-top: 0.5rem;">
            <button id="btn-rollback">Rollback CSV</button>
        </div>
    </div>

    <div class="section">
        <h2>Output</h2>
        <div id="output">Output will appear here...</div>
    </div>
</body>

</html>
