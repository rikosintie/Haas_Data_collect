<!DOCTYPE html>
<html>

<head>
    <!--
    Haas Appliance - Cockpit Firewall Control Page

    Provides UI for:
      - Simulating firewall changes (dry-run)
      - Comparing current vs planned rules
      - Rolling back CSV backups

    Loads haas-firewall.js for logic and uses Cockpit's JS APIs.
    -->
    <meta charset="utf-8">
    <title>Haas Firewall Control</title>

    <!-- Cockpit core JS API -->
    <script src="resource://cockpit/cockpit.js"></script>

    <!-- Cockpit Web Components polyfills -->
    <script src="resource://cockpit/wc/polyfills.js"></script>

    <!-- Cockpit base styles -->
    <link rel="stylesheet"
        href="resource://cockpit/wc/styles.css">

    <!-- Extension stylesheet -->
    <link rel="stylesheet"
        href="haas-firewall.css">

    <!-- Extension logic -->
    <script src="haas-firewall.js"></script>
</head>

<body>
    <h1>Haas Firewall Control</h1>
    <p>
        Use this page to simulate firewall changes, compare rules, and rollback CSV backups.
    </p>

    <div class="section">
        <h2>Simulate / Compare</h2>
        <p>These operations do not make persistent changes to the firewall.</p>

        <div class="button-row">
            <button id="btn-dry-run"
                class="btn">Simulate Firewall Update (Dry-Run)</button>
            <button id="btn-compare"
                class="btn">Compare Current vs Planned Rules</button>
            <button id="btn-show-rules"
                class="btn">Show Current UFW Rules</button>
        </div>
    </div>

    <div class="section">
        <h2>Rollback CSV Backup</h2>
        <p>
            Restore a previous CSV backup from:
            <code>/home/mhubbard/Haas_Data_collect/backups</code>
        </p>

        <label for="backup-name">Backup filename (e.g. users_2025-01-13_12-00-00.csv)</label>
        <input type="text"
            id="backup-name"
            placeholder="Enter backup filename">

        <div class="button-row mt-1">
            <button id="btn-rollback"
                class="btn">Rollback CSV</button>
        </div>
    </div>

    <div class="section">
        <h2>Output</h2>
        <div id="output">Output will appear here...</div>
    </div>
</body>

</html>
